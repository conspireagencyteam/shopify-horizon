{%- liquid
  comment
    Intended for blocks and sections that provide values for all the referenced settings.
    Custom version that includes flex-wrap settings.

    Accepts:
      settings: {block.settings || section.settings}
  endcomment

  assign horizontal_alignment = settings.horizontal_alignment

  assign vertical_alignment = settings.vertical_alignment
  if settings.align_baseline and vertical_alignment == 'flex-end'
    assign vertical_alignment = 'last baseline'
  endif

  unless settings.content_direction == 'row'
    assign horizontal_alignment = settings.horizontal_alignment_flex_direction_column
    assign vertical_alignment = settings.vertical_alignment_flex_direction_column
  endunless

  assign vertical_alignment_mobile = vertical_alignment

  if settings.vertical_on_mobile and vertical_alignment == 'last baseline'
    assign vertical_alignment_mobile = 'flex-end'
  endif
  
  assign flex_wrap = settings.flex_wrap | default: 'nowrap'
-%}

--flex-direction: {{ settings.content_direction | default: 'column' }}; --flex-wrap: {{ flex_wrap }};

{% render 'gap-style', value: settings.gap %}
{%  if settings.use_mobile_layout %}
  {% render 'gap-style', value: settings.gap_mobile, name: 'gap-mobile' %}
{% endif %}

--horizontal-alignment: {{ horizontal_alignment }}; --vertical-alignment: {{ vertical_alignment }};



{%- liquid
  if settings.use_mobile_layout
    assign horizontal_alignment_mobile = settings.horizontal_alignment_mobile

    assign vertical_alignment_mobile = settings.vertical_alignment_mobile
    if settings.align_baseline_mobile and vertical_alignment_mobile == 'flex-end'
      assign vertical_alignment_mobile = 'last baseline'
    endif

    unless settings.content_direction == 'row' or settings.horizontal_on_mobile
      assign horizontal_alignment_mobile = settings.horizontal_alignment_flex_direction_column_mobile
      assign vertical_alignment_mobile = settings.vertical_alignment_flex_direction_column_mobile
    endunless
    
    assign flex_wrap_mobile = settings.flex_wrap_mobile
    if flex_wrap_mobile == 'inherit'
      assign flex_wrap_mobile = 'var(--flex-wrap, nowrap)'
    elsif flex_wrap_mobile == blank
      assign flex_wrap_mobile = 'nowrap'
    endif
  endif
-%}

{% if settings.use_mobile_layout %}
  --flex-wrap-mobile: {{ flex_wrap_mobile }};
  --horizontal-alignment-mobile: {{ horizontal_alignment_mobile }}; --vertical-alignment-mobile: {{ vertical_alignment_mobile }};
{% else %}
  --flex-wrap-mobile: {{ flex_wrap }};
  --horizontal-alignment-mobile: {{ horizontal_alignment }}; --vertical-alignment-mobile: {{ vertical_alignment_mobile }};
{%  endif %}


{%- liquid
  if settings.reverse_order_on_mobile
    if settings.vertical_on_mobile or settings.content_direction == 'column'
      unless settings.horizontal_on_mobile
        echo '--flex-direction-mobile: column-reverse;'
      else
        echo '--flex-direction-mobile: row-reverse;'
      endunless
    else
      echo '--flex-direction-mobile: row-reverse;'
    endif
  else
    if settings.vertical_on_mobile or settings.content_direction == 'column'
      unless settings.horizontal_on_mobile
        echo '--flex-direction-mobile: column;'
      else
        echo '--flex-direction-mobile: row;'
      endunless
    else
      echo '--flex-direction-mobile: row;'
    endif
  endif
-%}